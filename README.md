Задача:

*ТЗ не мое. 

2.На основании DWH собрать OLAP куб с максимально возможной детализацией. (Приветствуется использование расчетных показателей на уровне куба, например, средний чек. 
Из обязательных показателей - расчетный остаток на основании всех описанных видов движений.)

Справочники:

Дата
Номенклатура (goods.xml)
Номенклатурные группы (goodgroups.xml)
Производители (manufactures.xml)
Аптеки (stores.xml)
Поставщики (suppliers.xml)

Факты:

Чеки (receipt.xml) --заголовок чека receipt_id 
-- уникальный GUID чека terminalid -- регистрационный номер фискального регистратора. Если ФР не используется, то передается некий уникальный идентификатор рабочего места кассира warehouseid -- ID склада/магазина в системе VirtualPos doc_type -- тип чека: sale или return date -- дата продажи в формате dd.mm.yyy hh:mi:ss items_count -- количество товаров в чеке --строки чека line_id -- уникальный GUID строки чека itemid -- ID товара в ВиртуалПос discount_name -- наименование акции quantity -- количество товара в чеке pricebase --цена по прайслисту за единицу товара (без учета скидки) pricesale -- цена продажи за единицу товара (с учетом скидки) discount -- сумма скидки amount --сумма по строке чека (с учетом скидки) cogs --себестоимость товара

Приход (income.xml) --заголовок прихода id -- ID документа поступления warehouse_id -- код склада, на который оформлено поступление docdate - дата документа поступления supplier_id -- ID Поставщика amount -- сумма поставки status -- статус документа поставки (accept – принят, drаft – черновик) --строки прихода item_id -- ID товарной позиции по номенклатурному справочнику quantity -- количество товара в чеке price --цена поступления amount --сумма

Перемещения (movegood.xml) --заголовок перемещения id -- уникальный GUID перемещения src_warehouse_id -- Код склада, с которого перемещается товар dst_warehouse_id -- Код склада, на который перемещается товар amount --Сумма перемещения status-- Код статуса документа status_name -- Статус документа created_date -- Дата создания документа Перемещения в формате dd.mm.yyy hh:mi:ss --строки перемещения line_id -- уникальный GUID строки перемещения item_id -- ID товара в ВиртуалПос quantity-- количество товара price-- Себестоимость товара в перемещении amount --сумма по строке

Возврат (returns.xml) --заголовок возврата id -- уникальный GUID возврата warehouse_id -- Код склада docnum -- Код документа docdate-- Дата документа Возврат поставщику supplier_id-- Код поставщика amount --Сумма возврата status-- Код статуса документа status_name -- Статус документа --строки возврата line_id-- уникальный GUID строки возврата item_id-- ID товара в ВиртуалПос quantity -- количество товара в чеке price-- Себестоимость товара в перемещении amount--сумма по строке expir_date-- Срок годности товара

Текущий остаток (stock.xml) --заголовок остатков id -- Код склада --строки остатков id-- ID товарной позиции по номенклатурному справочнику quantity -- количество товара в чеке price --цена поступления cogs --себестоимость
